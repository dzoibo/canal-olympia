<div id="global-container" [ngClass]="isLoading?'hidden':'flex'" class="pt-[124px] flex-col bg-[#0A1445] w-screen h-screen overflow-auto" >
  <ion-header class="absolute top-0 backdrop-blur-[20px] w-full bg-[#0c2080]/[0.5] pb-3">
    <div class="flex items-center justify-between h-16 w-full">
      <svg (click)="back()" class="ml-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M15.9805 3.49024C15.7207 3.49798 15.4741 3.60656 15.293 3.79298L7.79302 11.293C7.60555 11.4805 7.50024 11.7348 7.50024 12C7.50024 12.2652 7.60555 12.5195 7.79302 12.707L15.293 20.207C15.3852 20.303 15.4955 20.3796 15.6177 20.4324C15.7398 20.4852 15.8712 20.5131 16.0043 20.5145C16.1373 20.5158 16.2693 20.4906 16.3925 20.4403C16.5156 20.39 16.6275 20.3157 16.7216 20.2216C16.8157 20.1275 16.8901 20.0156 16.9404 19.8924C16.9906 19.7692 17.0159 19.6373 17.0145 19.5042C17.0131 19.3712 16.9853 19.2397 16.9325 19.1176C16.8797 18.9955 16.8031 18.8851 16.7071 18.793L9.91411 12L16.7071 5.20704C16.8516 5.06658 16.9503 4.88574 16.9902 4.68822C17.0302 4.4907 17.0096 4.28571 16.931 4.10013C16.8525 3.91454 16.7197 3.75701 16.5501 3.64818C16.3805 3.53935 16.182 3.4843 15.9805 3.49024Z" fill="#637394"/>
      </svg>
      <div class="flex flex-col justify-center">
        <ion-label class="w-full font-bold text-lg">Bessengue, Douala</ion-label>
        <ion-label class="text-[#637394] text-sm">Expendables 4</ion-label>
      </div>
      <svg *ngIf="!isExpandedSeat" (click)="expandSeat(true)" class="mr-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M3.5455 19.7825C3.5555 19.816 3.563 19.85 3.5765 19.8825C3.5905 19.917 3.61 19.948 3.628 19.9805C3.6415 20.005 3.6525 20.031 3.6685 20.0545C3.742 20.1645 3.836 20.2585 3.946 20.332C3.97 20.348 3.9955 20.3585 4.02 20.3725C4.0525 20.3905 4.0835 20.41 4.118 20.424C4.1505 20.4375 4.1845 20.445 4.218 20.455C4.247 20.4635 4.2745 20.4745 4.3045 20.4805C4.369 20.493 4.4345 20.5 4.5 20.5H11.5C12.052 20.5 12.5 20.052 12.5 19.5C12.5 18.948 12.052 18.5 11.5 18.5H6.914L18.5 6.914V11.5C18.5 12.052 18.948 12.5 19.5 12.5C20.052 12.5 20.5 12.052 20.5 11.5V4.5C20.5 4.4345 20.493 4.369 20.4805 4.304C20.4745 4.274 20.4635 4.2465 20.455 4.2175C20.445 4.184 20.4375 4.15 20.424 4.1175C20.41 4.083 20.3905 4.052 20.3725 4.0195C20.359 3.995 20.348 3.969 20.332 3.9455C20.2585 3.8355 20.1645 3.7415 20.0545 3.668C20.031 3.652 20.005 3.6415 19.9805 3.6275C19.948 3.6095 19.917 3.59 19.8825 3.576C19.85 3.5625 19.816 3.555 19.7825 3.545C19.7535 3.5365 19.726 3.5255 19.696 3.5195C19.631 3.507 19.5655 3.5 19.5 3.5H12.5C11.948 3.5 11.5 3.948 11.5 4.5C11.5 5.052 11.948 5.5 12.5 5.5H17.086L5.5 17.086V12.5C5.5 11.948 5.052 11.5 4.5 11.5C3.948 11.5 3.5 11.948 3.5 12.5V19.5C3.5 19.5655 3.507 19.631 3.5195 19.696C3.5255 19.726 3.537 19.7535 3.5455 19.7825Z" fill="#637394"/>
      </svg>
      <svg *ngIf="isExpandedSeat" class="mr-4" (click)="expandSeat(false)" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M20.9806 1.99024C20.7208 1.99798 20.4742 2.10656 20.2931 2.29298L14.0001 8.58595V4.00001C14.0019 3.8663 13.9769 3.73359 13.9266 3.60971C13.8762 3.48584 13.8015 3.37332 13.7069 3.27881C13.6123 3.1843 13.4997 3.10973 13.3758 3.05949C13.2519 3.00925 13.1191 2.98438 12.9854 2.98634C12.7204 2.99022 12.4677 3.09917 12.283 3.28924C12.0982 3.47931 11.9965 3.73496 12.0001 4.00001V11C12.0001 11.2652 12.1055 11.5196 12.293 11.7071C12.4805 11.8946 12.7349 12 13.0001 12H20.0001C20.1326 12.0019 20.2642 11.9774 20.3871 11.928C20.5101 11.8786 20.622 11.8052 20.7164 11.7122C20.8108 11.6191 20.8857 11.5083 20.9368 11.386C20.988 11.2637 21.0143 11.1325 21.0143 11C21.0143 10.8675 20.988 10.7363 20.9368 10.614C20.8857 10.4918 20.8108 10.3809 20.7164 10.2878C20.622 10.1948 20.5101 10.1214 20.3871 10.072C20.2642 10.0226 20.1326 9.99813 20.0001 10H15.4141L21.7071 3.70704C21.8516 3.56658 21.9503 3.38574 21.9903 3.18822C22.0302 2.9907 22.0096 2.78571 21.9311 2.60013C21.8525 2.41454 21.7197 2.25701 21.5501 2.14818C21.3805 2.03935 21.182 1.9843 20.9806 1.99024ZM3.50008 12.5C3.36757 12.4981 3.23601 12.5226 3.11304 12.572C2.99007 12.6214 2.87815 12.6948 2.78378 12.7878C2.68941 12.8809 2.61448 12.9918 2.56333 13.114C2.51218 13.2363 2.48584 13.3675 2.48584 13.5C2.48584 13.6325 2.51218 13.7637 2.56333 13.886C2.61448 14.0083 2.68941 14.1191 2.78378 14.2122C2.87815 14.3052 2.99007 14.3786 3.11304 14.428C3.23601 14.4774 3.36757 14.5019 3.50008 14.5H8.08602L2.29305 20.293C2.19708 20.3851 2.12046 20.4955 2.06767 20.6176C2.01489 20.7397 1.987 20.8712 1.98565 21.0042C1.98429 21.1373 2.0095 21.2692 2.05979 21.3924C2.11008 21.5156 2.18444 21.6275 2.27852 21.7216C2.3726 21.8157 2.4845 21.89 2.60768 21.9403C2.73086 21.9906 2.86283 22.0158 2.99587 22.0144C3.12891 22.0131 3.26034 21.9852 3.38247 21.9324C3.5046 21.8796 3.61497 21.803 3.70711 21.707L9.50008 15.9141V20.5C9.49821 20.6325 9.52269 20.7641 9.57211 20.8871C9.62152 21.01 9.69488 21.1219 9.78792 21.2163C9.88097 21.3107 9.99184 21.3856 10.1141 21.4368C10.2364 21.4879 10.3676 21.5142 10.5001 21.5142C10.6326 21.5142 10.7638 21.4879 10.8861 21.4368C11.0083 21.3856 11.1192 21.3107 11.2122 21.2163C11.3053 21.1219 11.3787 21.01 11.4281 20.8871C11.4775 20.7641 11.502 20.6325 11.5001 20.5V13.5C11.5001 13.2348 11.3947 12.9805 11.2072 12.7929C11.0196 12.6054 10.7653 12.5 10.5001 12.5H3.50008Z" fill="#637394"/>
      </svg>
    </div>
    <div class="flex justify-between items-center text-white font-bold h-[48px] mx-4">
      <div class="w-[164px] h-10 rounded-lg flex items-center justify-center border border-solid border-[#6d9eff1a]">
        <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <path d="M21.75 7V6.25C21.75 4.458 20.292 3 18.5 3H7C5.208 3 3.75 4.458 3.75 6.25V7H21.75ZM3.75 8.5V17.75C3.75 19.542 5.208 21 7 21H18.5C20.292 21 21.75 19.542 21.75 17.75V8.5H3.75ZM8.5 18C7.8095 18 7.25 17.4405 7.25 16.75C7.25 16.0595 7.8095 15.5 8.5 15.5C9.1905 15.5 9.75 16.0595 9.75 16.75C9.75 17.4405 9.1905 18 8.5 18ZM8.5 13.5C7.8095 13.5 7.25 12.9405 7.25 12.25C7.25 11.5595 7.8095 11 8.5 11C9.1905 11 9.75 11.5595 9.75 12.25C9.75 12.9405 9.1905 13.5 8.5 13.5ZM12.75 18C12.0595 18 11.5 17.4405 11.5 16.75C11.5 16.0595 12.0595 15.5 12.75 15.5C13.4405 15.5 14 16.0595 14 16.75C14 17.4405 13.4405 18 12.75 18ZM12.75 13.5C12.0595 13.5 11.5 12.9405 11.5 12.25C11.5 11.5595 12.0595 11 12.75 11C13.4405 11 14 11.5595 14 12.25C14 12.9405 13.4405 13.5 12.75 13.5ZM17 13.5C16.3095 13.5 15.75 12.9405 15.75 12.25C15.75 11.5595 16.3095 11 17 11C17.6905 11 18.25 11.5595 18.25 12.25C18.25 12.9405 17.6905 13.5 17 13.5Z" fill="#637394"/>
        </svg>
        <ion-text>Oct, 17</ion-text>
      </div>
      <div class="w-[164px] h-10 rounded-lg flex items-center justify-center border border-solid border-[#6d9eff1a]">
        <svg class="mr-1"xmlns="http://www.w3.org/2000/svg" width="25" height="24" viewBox="0 0 25 24" fill="none">
          <path d="M12.25 2C6.75 2 2.25 6.5 2.25 12C2.25 17.5 6.75 22 12.25 22C17.75 22 22.25 17.5 22.25 12C22.25 6.5 17.75 2 12.25 2ZM16 13.5H12C11.6 13.5 11.25 13.15 11.25 12.75V6.75C11.25 6.35 11.6 6 12 6C12.4 6 12.75 6.35 12.75 6.75V12H16C16.4 12 16.75 12.35 16.75 12.75C16.75 13.15 16.4 13.5 16 13.5Z" fill="#637394"/>
        </svg>
        <ion-text>15:10</ion-text> 
      </div>
    </div>
  </ion-header>
  <div id="screen-container" class="w-fit min-w-full grow overflow-auto flex flex-col justify-center items-center">
    <div class="w-full overflow-auto">
      <div class="w-full relative flex flex-col justify-center items-center">

        <svg id="screen" xmlns="http://www.w3.org/2000/svg" width="292" height="22" viewBox="0 0 292 22" fill="none">
          <path d="M1.5 21C118.252 -6.39727 181.316 -4.92592 290.5 21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
  
        <div class="w-full absolute top-0 flex justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="357" height="122" viewBox="0 0 357 122" fill="none" id="light">
            <path d="M322.5 21.2801C176.5 -10.7199 142 -3.22003 34.5 21.28L0.5 121.78H356.5L322.5 21.2801Z" fill="url(#paint0_linear_2845_711)"/>
            <defs>
              <linearGradient id="paint0_linear_2845_711" x1="178.5" y1="1.78004" x2="177.594" y2="114.721" gradientUnits="userSpaceOnUse">
                <stop stop-color="white" stop-opacity="0.1"/>
                <stop offset="1" stop-color="#1F2633" stop-opacity="0"/>
              </linearGradient>
            </defs>
          </svg>  
        </div>
        
  
        <div class="w-full text-center text-sm top-5 font-bold text-[#637394]">
          SCREEN
        </div>
        
      </div>
  
      <div id="seats" class="w-auto overflow-auto my-4 text-xs" 
      [ngStyle]="{
        'grid-template-columns':'repeat('+seats[0].columns.length+', 1fr)',
        'grid-template-rows': 'repeat('+seats.length+', 1fr)'
      }">
        <ng-container *ngFor="let seat of seats ; let i =index">
          <ng-container *ngFor="let column of seat.columns;let j=index" >
            
            <ng-container *ngIf="column.state!=='occupied'">
              <div (click)="reserveSeat(i,j)" [ngClass]="isExpandedSeat?'expanded-seat':'wrapped-seat'" class="flex items-center justify-center h-3 w-3 rounded-[12px] overflow-hidden">
                <div *ngIf="column.state==='free'" class="flex justify-center items-center h-full w-full bg-[#253554]" >
                  {{column.id}}
                </div>
                <div *ngIf="column.state==='selected'" class="flex h-full w-full button-primary success-shadow">
                  {{column.id}}
                </div>
              </div> 
            </ng-container>

            <ng-container *ngIf="column.state==='occupied'">
              <div [ngClass]="isExpandedSeat?'expanded-seat':'wrapped-seat'" class="flex items-center justify-center h-3 w-3">
                <ion-text class="text-[#637394] font-bold">x</ion-text> 
              </div>
            </ng-container>
            
          </ng-container>
          
        </ng-container>
      </div>
    </div>
    

    <div class="text-xs w-full h-12  relative mt-2">
      <div class="left-0 fixed w-screen flex justify-center items-center font-thin">
        <div class="mr-4 flex justify-center items-center">
          <div class="w-4 h-4 rounded-[50%] mr-2 bg-[#253554]"></div>
          <ion-text>Avalaible</ion-text>
        </div>
        <div class="mr-4 flex justify-center items-center">
          <svg class="mr-1" xmlns="http://www.w3.org/2000/svg" width="9" height="8" viewBox="0 0 9 8" fill="none">
            <path d="M6.33039 1.82845C6.24231 1.83053 6.15863 1.86739 6.09764 1.93099L4.49999 3.52864L2.90233 1.93099C2.87123 1.89902 2.83403 1.87361 2.79293 1.85628C2.75183 1.83894 2.70768 1.83003 2.66307 1.83007C2.59679 1.83016 2.53204 1.85 2.47708 1.88706C2.42213 1.92412 2.37947 1.97672 2.35456 2.03815C2.32965 2.09957 2.32361 2.16703 2.33722 2.2319C2.35084 2.29677 2.38348 2.35611 2.43098 2.40234L4.02863 4L2.43098 5.59765C2.39899 5.62837 2.37345 5.66516 2.35585 5.70587C2.33826 5.74658 2.32896 5.79039 2.32851 5.83474C2.32806 5.87908 2.33646 5.92308 2.35322 5.96413C2.36999 6.00519 2.39477 6.04249 2.42613 6.07385C2.45749 6.10521 2.49479 6.13 2.53585 6.14676C2.57691 6.16353 2.6209 6.17193 2.66525 6.17148C2.7096 6.17103 2.75341 6.16173 2.79412 6.14414C2.83483 6.12654 2.87162 6.101 2.90233 6.06901L4.49999 4.47135L6.09764 6.06901C6.12836 6.101 6.16515 6.12654 6.20586 6.14414C6.24657 6.16173 6.29038 6.17103 6.33473 6.17148C6.37907 6.17193 6.42307 6.16353 6.46412 6.14677C6.50518 6.13 6.54249 6.10522 6.57385 6.07386C6.60521 6.0425 6.62999 6.00519 6.64676 5.96414C6.66352 5.92308 6.67192 5.87908 6.67147 5.83474C6.67102 5.79039 6.66172 5.74658 6.64413 5.70587C6.62653 5.66516 6.60099 5.62837 6.569 5.59765L4.97134 4L6.569 2.40234C6.6175 2.35583 6.65082 2.29575 6.66458 2.22997C6.67833 2.16419 6.67189 2.09579 6.64609 2.03374C6.62029 1.97169 6.57634 1.91888 6.52001 1.88225C6.46367 1.84561 6.39757 1.82686 6.33039 1.82845Z" fill="#637394"/>
          </svg>
          <ion-text>Occupied</ion-text>
        </div>
        <div class="flex justify-center items-center">
          <div class="w-4 h-4 rounded-[50%] mr-2 button-primary success-shadow"></div>
          <ion-text>Chosen</ion-text>
        </div>
      </div>
    </div>
    <div class="w-fullrelative mt-2 "> 
      <div class="fixed w-screen left-0  flex justify-center " *ngIf="selectedSeats.length>0">
        <button (click)="payTicket()" class="button-primary h-[56px] success-shadow   w-[343px] text-lg rounded-lg font-bold">Buy {{selectedSeats.length}} tickets â€¢ {{ selectedSeats.length*1500}} FCFA</button>
      </div>
    </div>
  </div>
</div>
<div [ngClass]="!isLoading?'hidden':'flex'" class="h-screen w-screen justify-center items-center bg-[#0A1445]">
  <div class="h-16 w-16 ">
    <img src="../../assets/images/loader.gif" class="h-full w-full rounded-xl" alt="loader">
  </div>
</div>